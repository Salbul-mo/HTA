<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>keyup</title>
    <script src='../js/jquery-3.7.1.js'></script>
    <style>
    	div {
    		margin:0 auto;
    		width:500px;
    	}
		
		h3 {
			background:skyblue;
			text-align:center;
			width:30%;
			height:3em;
			line-height:3em;
		}    
		
		span {
			color:red;
		}
		
		textarea {
			resize:none;
		}
		
		textarea:focus {
			border:2px solid green;
			outline:none;
		}
    
    </style>
    <script>
    	$(document).ready(function(){
    		
    		const maxLength = $('textarea').attr('maxlength');
    		
    		$('h3').text(`남은 글자 수 : ${maxLength}`);
    		/*
    			$textarea.keyup(function() {});
    		*/
    		$('textarea').on('keyup', function(){
    			
    			const inputdata = $(this).val();
    			
    			const inputLength = inputdata.length;
    			
    			let remain = maxLength - inputLength;
				
	    		// 한글을 입력한 경우 -1까지 입력이 되다가 사라진다. 이를 해결하기 위해 다음과 같이 처리한다.
	    		// 출력되는 글자 수를 고정하고 textarea 에 표시되는 value 값 역시 길이를 한정시켜서 출력되게 한다.
    			if (remain < 0) {
    					remain = 0;
    					$(this).val(inputdata.substr(0, maxLength));
    			}
    			
	    		$('h3').text(`남은 글자 수 : ${remain}`);
    			});
    			
    	});
    
    
    </script>
  </head>
  <body>
	<div>
		<p>내 생각을 10자로 정리하세요</p>
		<h3></h3>
		<textarea cols="70" rows="5" maxlength="10"></textarea>
	</div>  
  </body>
</html>